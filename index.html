<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <title>Tâb</title>
    <link href="sty.css" rel="stylesheet"/>

    <!-- Painel de Conta do Usuário -->
    <script src="scripts/account-panel.js" defer></script>

    <!-- Lógica de alternância da barra lateral esquerda -->
    <script src="scripts/togglesLeftBarScript.js" defer></script>

    <!-- Lógica do jogo (deve carregar antes da IA) -->
    <script src="scripts/gameLogicScript.js" defer></script>
    <script src="scripts/rollScript.js" defer></script>
    <script src="scripts/skipButtonScript.js" defer></script>
    <script src="scripts/forfeitButtonScript.js" defer></script>

    <!-- Inteligência artificial (carregada após a lógica do jogo) -->
    <script src="scripts/aiPlayerScript.js" defer></script>
    <script src="scripts/aiIntegrationScript.js" defer></script>

    <!-- Script de inicialização(executado por último) -->
    <script src="scripts/startingGameScript.js" defer></script>

</head>
<body>

<header id="site-header">
    <nav class="navbar">
        <h1 class="header-title" id="header-title">Tâb</h1>

        <div class="header-actions" role="group" aria-label="Conta">
            <h4>Conta</h4>

            <!-- Botão de acesso ao painel de conta -->
            <button id="account-btn"
                    class="icon-btn"
                    aria-haspopup="true"
                    aria-controls="account-panel"
                    aria-expanded="false"
                    title="Entrar / Criar conta">
                <img src="media/loginIcon.png" alt="Ícone de conta"/>
            </button>

            <!-- Painel de autenticação (login/criação de conta) -->
            <div id="account-panel" class="account-panel" role="dialog" aria-modal="false" aria-labelledby="account-panel-title" hidden>
                <div class="panel-inner" role="document">
                    <h3 id="account-panel-title">Entrar</h3>

                    <!-- Formulário de login -->
                    <form id="login-form" action="/login" method="post" novalidate>
                        <label for="username">Usuário</label>
                        <input id="username" name="username" type="text" autocomplete="username" required />

                        <label for="password">Senha</label>
                        <input id="password" name="password" type="password" autocomplete="current-password" required />

                        <div class="panel-row">
                            <button type="submit" class="btn btn-primary" id="login-submit">Entrar</button>
                        </div>

                        <div class="panel-create">
                            <a href="/signup" class="create-link" id="create-account">Criar conta</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </nav>
</header>

<div class="container" id="main-content">

    <!-- Barra lateral esquerda (Regras e Classificação) -->
    <aside class="sidebar collapsed" id="left-bar" tabindex="0" aria-labelledby="rules-title" aria-hidden="true">

        <!-- Modo minimizado da barra lateral -->
        <div class="rules-minimized" aria-hidden="false">
            <h2>Menu</h2>
            <ul class="rules-list">
                <li>
                    <button class="left-bar-toggles" id="rules-toggle" aria-controls="left-bar" aria-expanded="false" title="Abrir regras">
                        Regras
                    </button>
                </li>
                <li>
                    <button class="left-bar-toggles" id="class-toggle" aria-controls="left-bar" aria-expanded="false" title="Ver classificação">
                        Classificação
                    </button>
                </li>
            </ul>
        </div>

        <div class="class-content" id="class-content" hidden>
            <h2 id="class-title">Classificação</h2>
            <div class="class-content" id="class-table">
                <h3 style="align-self: center">Ranking</h3>
                <ol id="class-table-items">
                    <li id="first-place">player1234 - 1000pts</li>
                    <li id="second-place">player727 - 900pts</li>
                    <li id="third-place">player09098 - 800pts</li>
                    <li id="remaining-place">...</li>
                </ol>
            </div>
        </div>

        <div class="rules-content" id="rules-content" hidden>
            <h2 id="rules-title">Regras completas — Tâb</h2>

            <!-- Sumário / índice de navegação das regras -->
            <nav class="rules-toc" aria-label="Sumário das regras">
                <strong>Sumário</strong>
                <ol>
                    <li><a href="#introducao">Introdução</a></li>
                    <li><a href="#tabuleiro">Tabuleiro</a></li>
                    <li><a href="#pecas">Peças e colocação inicial</a></li>
                    <li><a href="#objetivo">Objetivo</a></li>
                    <li><a href="#equipamento">Equipamento (varetas)</a></li>
                    <li><a href="#lancamento">Lançamento e valores</a></li>
                    <li><a href="#ativacao">Ativação: o lançamento "tâb"</a></li>
                    <li><a href="#movimento">Movimento normal das peças</a></li>
                    <li><a href="#caminho">Caminho das peças</a></li>
                    <li><a href="#captura">Captura</a></li>
                    <li><a href="#vitoria">Condição de vitória</a></li>
                    <li><a href="#fontes">Fontes</a></li>
                </ol>
            </nav>

            <!-- Seções detalhadas das regras -->
            <section id="introducao">
                <h3>Introdução</h3>
                <p>
                    Tâb é um jogo tradicional de corrida e captura originário do norte da África e da Península Arábica,
                    jogado por duas pessoas. As regras variam conforme a região; aqui é apresentada uma versão
                    consolidada a partir de fontes históricas e contemporâneas.
                </p>
            </section>

            <section id="tabuleiro">
                <h3>Tabuleiro</h3>
                <p>
                    O tabuleiro padrão possui 4 linhas e um número ímpar de colunas (geralmente entre 7 e 15),
                    sendo as linhas externas as de cada jogador.
                </p>
            </section>

            <section id="pecas">
                <h3>Peças e colocação inicial</h3>
                <ul>
                    <li>Cada jogador posiciona suas peças em todas as casas da linha inicial correspondente.</li>
                    <li>Exemplo: em um tabuleiro 4×7, o jogador A ocupa todas as 7 casas da primeira linha; o jogador B ocupa as 7 da última.</li>
                </ul>
            </section>

            <section id="objetivo">
                <h3>Objetivo</h3>
                <p>Capturar todas as peças do adversário, removendo-as do tabuleiro.</p>
            </section>

            <section id="equipamento">
                <h3>Equipamento (varetas)</h3>
                <p>
                    São utilizadas quatro varetas, cada uma com dois lados distintos: um plano (face clara)
                    e outro arqueado (face escura).
                </p>
            </section>

            <section id="lancamento">
                <h3>Lançamento e valores</h3>
                <ul>
                    <li>0 planas (todas arqueadas): 6 passos + jogue novamente</li>
                    <li>1 plana: 1 passo + jogue novamente</li>
                    <li>2 planas: 2 passos</li>
                    <li>3 planas: 3 passos</li>
                    <li>4 planas: 4 passos + jogue novamente</li>
                </ul>
            </section>

            <section id="ativacao">
                <h3>Ativação</h3>
                <p>
                    Peças na linha inicial só podem ser ativadas com um lançamento de 1 (uma vareta plana).
                    Após ativadas, movem uma casa e o jogador lança novamente.
                </p>
            </section>

            <section id="movimento">
                <h3>Movimento das peças</h3>
                <p>
                    As peças movem-se da direita para a esquerda nas linhas 2 e 4,
                    e da esquerda para a direita nas linhas 1 e 3.
                </p>
            </section>

            <section id="caminho">
                <h3>Caminho das peças</h3>
                <p>
                    Ao fim da linha 3, o jogador pode optar por entrar na linha 4 (território inimigo) ou continuar nas linhas centrais.
                    A entrada no território inimigo só é permitida se existirem peças adversárias ali.
                </p>
            </section>

            <section id="captura">
                <h3>Captura</h3>
                <p>
                    Ao pousar numa casa ocupada por uma peça inimiga, esta é removida do tabuleiro.
                </p>
            </section>

            <section id="vitoria">
                <h3>Condição de vitória</h3>
                <p>
                    O jogo termina quando todas as peças de um jogador são capturadas.
                </p>
            </section>

            <section id="fontes">
                <h3>Fontes</h3>
                <p>
                    Referência: <a href="https://en.wikipedia.org/wiki/T%C3%A2b" target="_blank" rel="noopener">Wikipedia — Tâb</a>
                </p>
            </section>
        </div>
    </aside>

    <main>
        <!-- Caixa de mensagens do jogo -->
        <div class="message-box" id="msg-box">
            <h3>Relatório de jogo:</h3>
            <div class="message" id="msg">
                <p>Bem-vindo ao Tâb! Clique em "Jogar" para iniciar uma nova partida.</p>
            </div>
        </div>

        <!-- Tabuleiro do jogo -->
        <section id="game-board" class="game-board hidden">tabuleiro</section>

        <!-- Botão principal para iniciar o jogo -->
        <div id="playBtn" class="play-button" role="button" tabindex="0"
             aria-haspopup="dialog" aria-controls="playDialog"
             aria-expanded="false" title="Jogar">
            Jogar
        </div>

        <!-- Janela modal de configuração de nova partida -->
        <div id="overlay" class="overlay hidden" data-hidden="true">
            <div id="playDialog" class="dialog" role="dialog"
                 aria-modal="true" aria-labelledby="dialogTitle">

                <h2 id="dialogTitle">Novo Jogo</h2>

                <form id="playForm" autocomplete="off">

                    <!-- Parâmetro: tamanho do tabuleiro -->
                    <label for="boardSize">Tamanho do tabuleiro</label>
                    <input
                            id="boardSize"
                            name="boardSize"
                            type="number"
                            min="5"
                            max="15"
                            step="2"
                            value="7"
                            title="Escolha um tamanho ímpar (7, 9, 11...)"
                    />

                    <!-- Seleção de tipo de oponente -->
                    <fieldset>
                        <legend>Adversário</legend>
                        <label>
                            <input type="radio" name="opponent" value="human" checked /> Humano
                        </label>
                        <label>
                            <input type="radio" name="opponent" value="pc" /> Computador
                        </label>
                    </fieldset>

                    <!-- Opções adicionais para jogo contra IA -->
                    <div id="pcOptions" class="pc-options hidden" aria-hidden="true">
                        <label for="difficulty">Dificuldade da IA</label>
                        <select id="difficulty" name="difficulty">
                            <option value="easy">Fácil</option>
                            <option value="medium" selected>Médio</option>
                            <option value="hard">Difícil</option>
                        </select>
                    </div>

                    <!-- Definição de quem inicia a partida -->
                    <label for="starter">Quem começa</label>
                    <select id="starter" name="starter">
                        <option value="player" selected>Vermelho</option>
                        <option value="pc">Azul</option>
                        <option value="random">Aleatório</option>
                    </select>

                    <!-- Botões de controle do diálogo -->
                    <div class="actions">
                        <button type="button" id="cancelBtn" class="btn btn-secondary">Cancelar</button>
                        <button type="submit" id="confirmBtn" class="btn btn-primary">Confirmar</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Barra lateral direita (Comandos de jogo) -->
    <aside class="sidebar" id="right-bar">
        <h2>Comandos</h2>

        <!-- Área de lançamento das varetas/dados -->
        <div class="dice-area">
            <button id="roll-dice">Jogar Dados</button>
            <div class="dice-result">
                <div class="dice-images">
                    <!-- As imagens dos dados/varetas são geradas dinamicamente -->
                </div>
                <div class="dice-total">Resultado: —</div>
            </div>
        </div>

        <!-- Botão para pular turno -->
        <div class="skip" id="skip-button" role="button" tabindex="0">
            pular a vez
        </div>

        <!-- Botão para desistir do jogo -->
        <div class="forfeit" id="forfeit-button" role="button" tabindex="0">
            desistir
        </div>
    </aside>
</div>

<div class="footer">
    <h1>Tâb - Jogo de Tabuleiro Tradicional</h1>
</div>

</body>
</html>
