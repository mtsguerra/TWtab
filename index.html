<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>T√¢b</title>
    <link href="sty.css" rel="stylesheet"/>
    <script src="scripts/account-panel.js" defer></script>
    <script src="scripts/togglesLeftBarScript.js" defer></script>
    <script src="scripts/startingGameScript.js" defer></script>
    <script src="scripts/rollScript.js" defer></script>
    <script src="scripts/gameLogicScript.js" defer></script>

</head>
<body>
    <header id="site-header">
        <nav class="navbar">
            <h1 id="header-title">T√¢b</h1>
            <!-- Header actions aligned to the far right -->
            <!-- Header actions aligned to the far right -->
            <div class="header-actions" role="group" aria-label="Conta">
                <h4>Conta</h4>
                <!-- Icon button: replace img src with your image later -->
                <button id="account-btn"
                        class="icon-btn"
                        aria-haspopup="true"
                        aria-controls="account-panel"
                        aria-expanded="false"
                        title="Entrar / Criar conta">
                    <img src="media/loginIcon.png" alt="√çcone de conta (substitua)"/>
                </button>

                <!-- Small dropdown panel that appears below the button -->
                <div id="account-panel" class="account-panel" role="dialog" aria-modal="false" aria-labelledby="account-panel-title" hidden>
                    <div class="panel-inner" role="document">
                        <h3 id="account-panel-title">Entrar</h3>

                        <form id="login-form" action="/login" method="post" novalidate>
                            <label for="username">Username</label>
                            <input id="username" name="username" type="text" autocomplete="username" required />

                            <label for="password">Senha</label>
                            <input id="password" name="password" type="password" autocomplete="current-password" required />

                            <div class="panel-row">
                                <button type="submit" class="btn btn-primary" id="login-submit">Entrar</button>
                            </div>

                            <div class="panel-create">
                                <a href="/signup" class="create-link" id="create-account">Criar conta</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- changed id -> class "container" so CSS matches -->
    <div class="container" id="main-content">
        <aside class="sidebar collapsed" id="left-bar" tabindex="0" aria-labelledby="rules-title" aria-hidden="true">
            <!-- minimized button shown when collapsed -->
            <div class="rules-minimized" aria-hidden="false">
                <h2>Teste</h2>
                <ul class="rules-list">
                    <li><button class="left-bar-toggles" id="rules-toggle" aria-controls="left-bar" aria-expanded="false" title="Abrir regras">
                        Regras
                    </button></li>
                    <li><button class="left-bar-toggles" id="class-toggle" aria-controls="left-bar" aria-expanded="false" title="Ver classifica√ß√£o">
                        Classifica√ß√£o
                    </button></li>
                </ul>
            </div>

            <div class="class-content" id="class-content" hidden>
                <h2 id="class-title">Classifica√ß√£o</h2>
                <div class="class-content" id="class-table">
                    <h3 style="align-self: center">Ranking</h3>
                    <ol id="class-table-items">
                        <li id="first-place">player1234 - 1000pts</li>
                        <li id="second-place">player727 - 900pts</li>
                        <li id="third-place">player09098 - 800pts</li>
                        <li id="remaining-place">...</li>
                    </ol>
                </div>
            </div>

            <!-- full content hidden when collapsed -->
            <div class="rules-content" id="rules-content" hidden>
                <h2 id="rules-title">Regras completas ‚Äî T√¢b</h2>

                <!-- Sum√°rio (links internos para pular √†s se√ß√µes) -->
                <nav class="rules-toc" aria-label="Sum√°rio das regras">
                    <strong>Sum√°rio</strong>
                    <ol>
                        <li><a href="#introducao">Introdu√ß√£o</a></li>
                        <li><a href="#tabuleiro">Tabuleiro</a></li>
                        <li><a href="#pecas">Pe√ßas e coloca√ß√£o inicial</a></li>
                        <li><a href="#objetivo">Objetivo</a></li>
                        <li><a href="#equipamento">Equipamento (varetas)</a></li>
                        <li><a href="#lancamento">Lan√ßamento e valores</a></li>
                        <li><a href="#ativacao">Ativa√ß√£o: o lan√ßamento "t√¢b"</a></li>
                        <li><a href="#movimento">Movimento normal das pe√ßas</a></li>
                        <li><a href="#caminho">Caminho das pe√ßas</a></li>
                        <li><a href="#captura">Captura</a></li>
                        <li><a href="#empilhamento">Empilhamento / deslocamento em grupo</a></li>
                        <li><a href="#separacao">Separa√ß√£o de pilhas</a></li>
                        <li><a href="#turno">Sequ√™ncia de turno</a></li>
                        <li><a href="#vitoria">Condi√ß√£o de vit√≥ria</a></li>
                        <li><a href="#variacoes">Varia√ß√µes regionais</a></li>
                        <li><a href="#fontes">Fontes</a></li>
                    </ol>
                </nav>

                <!-- Conte√∫do detalhado -->
                <section id="introducao">
                    <h3>Introdu√ß√£o</h3>
                    <p>
                        T√¢b √© um jogo de corrida / captura tradicional do norte da √Åfrica e da Pen√≠nsula Ar√°bica,
                        jogado por duas pessoas. As regras variam regionalmente; abaixo segue uma vers√£o
                        abrangente das regras tradicionais tal como descritas nas fontes hist√≥ricas e modernas.
                    </p>
                </section>

                <section id="tabuleiro">
                    <h3>Tabuleiro</h3>
                    <p>
                        O tabuleiro t√≠pico tem 4 linhas (duas linhas exteriores ‚Äî uma para cada jogador ‚Äî e duas
                        linhas do meio) e um n√∫mero √≠mpar de colunas, frequentemente entre 7 e 15. As colunas
                        determinam o percurso que as pe√ßas seguem. Em algumas variantes o n√∫mero de colunas √© fixo.
                    </p>
                </section>

                <section id="pecas">
                    <h3>Pe√ßas e coloca√ß√£o inicial</h3>
                    <ul>
                        <li>Cada jogador tem pe√ßas id√™nticas (normalmente 1 pe√ßa por casa) colocadas em cada casa da sua linha inicial (linha exterior mais pr√≥xima do jogador).</li>
                        <li>Assim, numa configura√ß√£o 4√ó7, o jogador A ocupa todas as 7 casas da primeira linha; o jogador B ocupa as 7 casas da √∫ltima linha, em oposi√ß√£o.</li>
                    </ul>
                </section>

                <section id="objetivo">
                    <h3>Objetivo</h3>
                    <p>O objetivo √© capturar todas as pe√ßas do advers√°rio, removendo-as do tabuleiro.</p>
                </section>

                <section id="equipamento">
                    <h3>Equipamento (varetas)</h3>
                    <p>
                        Em vez de dados usa‚Äëse um conjunto de 4 varetas de lan√ßamento (casting sticks). Cada vareta tem dois lados distintos:
                        um lado 'plano' (geralmente a face clara) e um lado 'arqueado' (a face escura). O resultado do lan√ßamento √© o n√∫mero de faces planas voltadas para cima.
                    </p>
                </section>

                <section id="lancamento">
                    <h3>Lan√ßamento e valores</h3>
                    <p>
                        Ao lan√ßar as 4 varetas conta‚Äëse quantas faces planas (ou "caras") ficaram para cima:
                    </p>
                    <ul>
                        <li>0 planas (todas arqueadas): costuma ser chamado de "0" ou ter efeito especial em algumas variantes.</li>
                        <li>1 plana: movimento de 1 casa.</li>
                        <li>2 planas: movimento de 2 casas.</li>
                        <li>3 planas: movimento de 3 casas.</li>
                        <li>4 planas: movimento de 4 casas (√†s vezes tamb√©m chamado "r√°pido").</li>
                    </ul>
                    <p>
                        Em muitas descri√ß√µes, alguns resultados (especialmente o lan√ßamento que d√° origem ao termo "t√¢b")
                        t√™m efeitos adicionais ‚Äî ver a se√ß√£o de ativa√ß√£o e regras especiais.
                    </p>
                </section>

                <section id="ativacao">
                    <h3>Ativa√ß√£o: o lan√ßamento "t√¢b"</h3>
                    <p>
                        Uma regra central √© que as pe√ßas na linha inicial n√£o podem normalmente mover-se livremente at√© serem "ativadas".
                        A ativa√ß√£o costuma exigir um resultado espec√≠fico no lan√ßamento ‚Äî tradicionalmente chamado de "t√¢b".
                        Dependendo da variante, um "t√¢b" pode ser:
                    </p>
                    <ul>
                        <li>um resultado particular das varetas (por exemplo, 0 planas ou 4 planas em algumas variantes),</li>
                        <li>ou uma combina√ß√£o especial (por exemplo, duas varetas de cada lado) que permite tirar pe√ßas da linha inicial.</li>
                    </ul>
                    <p>
                        Quando uma pe√ßa √© ativada, ela passa a poder entrar no percurso pelo qual as pe√ßas circulam.
                        Em muitas regras, a ativa√ß√£o tamb√©m permite dividir pilhas ou mover uma pe√ßa individualmente.
                    </p>
                </section>

                <section id="movimento">
                    <h3>Movimento normal das pe√ßas</h3>
                    <p>
                        - O jogador lan√ßa as 4 varetas e escolhe uma (ou mais, conforme variantes) pe√ßa(s) para mover pelo n√∫mero obtido.
                        - O movimento segue um percurso determinado pelo desenho do tabuleiro (veja "Caminho das pe√ßas").
                        - Apenas pe√ßas ativadas podem iniciar o percurso a partir da linha inicial; pe√ßas no percurso movem-se conforme o resultado do lan√ßamento.
                        - Se uma pe√ßa terminar a jogada em uma casa ocupada pelo advers√°rio, a pe√ßa advers√°ria √© capturada e removida do tabuleiro.
                    </p>
                </section>

                <section id="caminho">
                    <h3>Caminho das pe√ßas</h3>
                    <p>
                        As pe√ßas geralmente circulam das linhas iniciais, atravessam as duas linhas do meio em forma de circuito e podem, em algumas regras,
                        entrar na linha inicial do advers√°rio. Regras comuns sobre o percurso:
                    </p>
                    <ul>
                        <li>As pe√ßas n√£o voltam √† pr√≥pria linha inicial depois de a deixarem (ou s√≥ o podem fazer em variantes espec√≠ficas).</li>
                        <li>Ao alcan√ßarem a linha inicial advers√°ria, as pe√ßas podem ser capturadas l√° ou podem sair do tabuleiro dependendo da variante.</li>
                        <li>O percurso pode ser serpenteante: por exemplo, da linha inicial v√° para a linha intermedi√°ria mais pr√≥xima, percorra colunas, depois para a outra linha intermedi√°ria e finalmente para a linha inicial advers√°ria.</li>
                    </ul>
                    <p>Consulte o desenho do seu tabuleiro local para definir o caminho exato; as regras de movimento aplicam‚Äëse ao tra√ßado definido.</p>
                </section>

                <section id="captura">
                    <h3>Captura</h3>
                    <p>
                        - Pousar numa casa ocupada por uma pe√ßa advers√°ria remove a pe√ßa advers√°ria do tabuleiro (captura).
                        - Se houver uma pilha de pe√ßas advers√°rias, regras podem variar: normalmente pousar na mesma casa captura toda a pilha inimiga.
                        - O jogador captura usando a pe√ßa que chega; n√£o h√° captura por salto (exceto em variantes espec√≠ficas).
                    </p>
                </section>

                <section id="empilhamento">
                    <h3>Empilhamento / deslocamento em grupo</h3>
                    <p>
                        - Se uma pe√ßa pousa numa casa onde j√° existem pe√ßas do mesmo jogador, as pe√ßas formam uma pilha (stack).
                        - Pilhas movem‚Äëse como uma unidade: ao mover a pe√ßa de cima, toda a pilha desloca‚Äëse pelo n√∫mero indicado.
                        - Pilhas s√£o vulner√°veis: se uma pilha pousar numa casa com pe√ßas advers√°rias, a pilha advers√°ria √© capturada.
                    </p>
                </section>

                <section id="separacao">
                    <h3>Separa√ß√£o de pilhas</h3>
                    <p>
                        - Em muitas variantes, a separa√ß√£o (dividir uma pilha em duas) s√≥ √© permitida se o jogador obtiver um lan√ßamento especial
                        (por exemplo, o resultado "t√¢b") ou seguir regra local que permita quebrar a pilha.
                        - Quando a separa√ß√£o √© permitida, o jogador escolhe quantas pe√ßas separam do topo para mover independentemente.
                    </p>
                </section>

                <section id="turno">
                    <h3>Sequ√™ncia de turno</h3>
                    <ol>
                        <li>O jogador lan√ßa as 4 varetas.</li>
                        <li>Interpreta o resultado (n¬∫ de planas, poss√≠veis efeitos especiais).</li>
                        <li>Escolhe pe√ßa(s) ativadas ou pilha(s) para mover conforme o valor.</li>
                        <li>Executa o movimento; aplica capturas e regras de empilhamento/separa√ß√£o.</li>
                        <li>Em variantes, certos resultados concedem jogadas adicionais ‚Äî aplique conforme a regra local.</li>
                    </ol>
                </section>

                <section id="vitoria">
                    <h3>Condi√ß√£o de vit√≥ria</h3>
                    <p>
                        O jogo termina quando um jogador captura todas as pe√ßas do advers√°rio. Em algumas variantes existem condi√ß√µes alternativas (por exemplo,
                        expulsar todas as pe√ßas do advers√°rio para fora do tabuleiro ou atingir uma posi√ß√£o final).
                    </p>
                </section>

                <section id="variacoes">
                    <h3>Varia√ß√µes regionais</h3>
                    <p>
                        H√° muitas variantes regionais: diferen√ßas podem incluir o n√∫mero exato de colunas, o significado exato do lan√ßamento "t√¢b",
                        regras para 0 ou 4 planas, se pilhas capturam parcialmente ou totalmente, e se pe√ßas podem sair do tabuleiro ao chegar √† linha advers√°ria.
                    </p>
                    <p>
                        Recomenda‚Äëse combinar as regras com o advers√°rio antes de come√ßar (por exemplo: qual lan√ßamento ativa pe√ßas; 0 planas √© penalidade ou b√¥nus; regras para dividir pilhas).
                    </p>
                </section>

                <section id="fontes">
                    <h3>Fontes</h3>
                    <p>
                        Resumo baseado em descri√ß√µes hist√≥ricas e modernas do jogo (Wikipedia e guias de regras). Consulte:
                        <a href="https://en.wikipedia.org/wiki/T%C3%A2b" target="_blank" rel="noopener">Wikipedia ‚Äî T√¢b</a>
                        e adapta√ß√µes modernas para detalhes e variantes.
                    </p>
                </section>
            </div>
        </aside>

        <main>
            <!-- Caixa de mensagens -->
            <div class="message-box" id="msg-box">
                <h3>Rel√°torio de jogo:</h3>
                <div class="message" id="msg">
                    <p>Bem-vindo ao T√¢b! Clique em "Jogar" para iniciar um novo jogo.</p>
                </div>
            </div>

            <!-- üëá Tabuleiro logo abaixo da message box -->
            <section id="game-board" class="game-board hidden">teste123</section>

            <!-- Bot√£o para abrir o menu -->
            <div id="playBtn" class="play-button" role="button" tabindex="0"
                 aria-haspopup="dialog" aria-controls="playDialog"
                 aria-expanded="false" title="Play">
                Jogar
            </div>

            <!-- Modal dialog / menu -->
            <div id="overlay" class="overlay hidden" data-hidden="true">
                <div id="playDialog" class="dialog" role="dialog"
                     aria-modal="true" aria-labelledby="dialogTitle">

                    <h2 id="dialogTitle">Novo Jogo</h2>

                    <form id="playForm" autocomplete="off">

                        <!-- Tamanho do tabuleiro -->
                        <label for="boardSize">Tamanho do tabuleiro</label>
                        <input
                                id="boardSize"
                                name="boardSize"
                                type="number"
                                min="5"
                                max="15"
                                step="2"
                                value="7"
                                title="Escolha um tamanho √≠mpar (7, 9, 11...)"
                        />

                        <!-- Tipo de advers√°rio -->
                        <fieldset>
                            <legend>Advers√°rio</legend>
                            <label>
                                <input type="radio" name="opponent" value="human" checked /> Humano
                            </label>
                            <label>
                                <input type="radio" name="opponent" value="pc" /> Computador
                            </label>
                        </fieldset>

                        <!-- Op√ß√µes adicionais para computador -->
                        <div id="pcOptions" class="pc-options hidden" aria-hidden="true">
                            <label for="difficulty">Dificuldade</label>
                            <select id="difficulty" name="difficulty">
                                <option value="easy">F√°cil</option>
                                <option value="medium" selected>M√©dio</option>
                                <option value="hard">Dif√≠cil</option>
                            </select>
                        </div>

                        <!-- Quem come√ßa -->
                        <label for="starter">Quem come√ßa</label>
                        <select id="starter" name="starter">
                            <option value="player" selected>Vermelho</option>
                            <option value="pc">Azul</option>
                            <option value="random">Aleat√≥rio</option>
                        </select>

                        <div class="actions">
                            <button type="button" id="cancelBtn" class="btn btn-secondary">Cancel</button>
                            <button type="submit" id="confirmBtn" class="btn btn-primary">Confirm</button>
                        </div>
                    </form>
                </div>
            </div>

        </main>


        <aside class="sidebar" id="right-bar">
            <h2>Comandos</h2>
            <div class="dice-area">
                <button id="roll-dice">Jogar</button>
                <div class="dice-result">
                    <div class="dice-images">
                        <!-- imagens aparecer√£o aqui -->
                    </div>
                    <div class="dice-total">Resultado: ‚Äî</div>
                </div>
            </div>
            <div class="skip" id="skip-button" role="button">
                pular a vez
            </div>
            <div class="forfeit" id="forfeit-button" role="button">
                desistir
            </div>
        </aside>
    </div>
    <div class="footer">
        <h1>footer</h1>
    </div>

</body>
</html>