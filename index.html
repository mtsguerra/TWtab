<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Tâb</title>
    <link href="sty.css" rel="stylesheet"/>

    <!-- Core Scripts -->
    <script src="scripts/account-panel.js" defer></script>
    <script src="scripts/togglesLeftBarScript.js" defer></script>

    <!-- Game Logic (must load before AI) -->
    <script src="scripts/gameLogicScript.js" defer></script>
    <script src="scripts/rollScript.js" defer></script>
    <script src="scripts/skipButtonScript.js" defer></script>
    <script src="scripts/forfeitButtonScript.js" defer></script>

    <!-- AI Scripts (load after game logic) -->
    <script src="scripts/aiPlayerScript.js" defer></script>
    <script src="scripts/aiIntegrationScript.js" defer></script>

    <!-- Starting Game Script (must load last) -->
    <script src="scripts/startingGameScript.js" defer></script>

</head>
<body>
<header id="site-header">
    <nav class="navbar">
        <h1 class="header-title" id="header-title">Tâb</h1>
        <div class="header-actions" role="group" aria-label="Conta">
            <h4>Conta</h4>
            <button id="account-btn"
                    class="icon-btn"
                    aria-haspopup="true"
                    aria-controls="account-panel"
                    aria-expanded="false"
                    title="Entrar / Criar conta">
                <img src="media/loginIcon.png" alt="Ícone de conta"/>
            </button>

            <div id="account-panel" class="account-panel" role="dialog" aria-modal="false" aria-labelledby="account-panel-title" hidden>
                <div class="panel-inner" role="document">
                    <h3 id="account-panel-title">Entrar</h3>

                    <form id="login-form" action="/login" method="post" novalidate>
                        <label for="username">Username</label>
                        <input id="username" name="username" type="text" autocomplete="username" required />

                        <label for="password">Senha</label>
                        <input id="password" name="password" type="password" autocomplete="current-password" required />

                        <div class="panel-row">
                            <button type="submit" class="btn btn-primary" id="login-submit">Entrar</button>
                        </div>

                        <div class="panel-create">
                            <a href="/signup" class="create-link" id="create-account">Criar conta</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </nav>
</header>

<div class="container" id="main-content">
    <aside class="sidebar collapsed" id="left-bar" tabindex="0" aria-labelledby="rules-title" aria-hidden="true">
        <div class="rules-minimized" aria-hidden="false">
            <h2>Menu</h2>
            <ul class="rules-list">
                <li><button class="left-bar-toggles" id="rules-toggle" aria-controls="left-bar" aria-expanded="false" title="Abrir regras">
                    Regras
                </button></li>
                <li><button class="left-bar-toggles" id="class-toggle" aria-controls="left-bar" aria-expanded="false" title="Ver classificação">
                    Classificação
                </button></li>
            </ul>
        </div>

        <div class="class-content" id="class-content" hidden>
            <h2 id="class-title">Classificação</h2>
            <div class="class-content" id="class-table">
                <h3 style="align-self: center">Ranking</h3>
                <ol id="class-table-items">
                    <li id="first-place">player1234 - 1000pts</li>
                    <li id="second-place">player727 - 900pts</li>
                    <li id="third-place">player09098 - 800pts</li>
                    <li id="remaining-place">...</li>
                </ol>
            </div>
        </div>

        <div class="rules-content" id="rules-content" hidden>
            <h2 id="rules-title">Regras completas — Tâb</h2>

            <nav class="rules-toc" aria-label="Sumário das regras">
                <strong>Sumário</strong>
                <ol>
                    <li><a href="#introducao">Introdução</a></li>
                    <li><a href="#tabuleiro">Tabuleiro</a></li>
                    <li><a href="#pecas">Peças e colocação inicial</a></li>
                    <li><a href="#objetivo">Objetivo</a></li>
                    <li><a href="#equipamento">Equipamento (varetas)</a></li>
                    <li><a href="#lancamento">Lançamento e valores</a></li>
                    <li><a href="#ativacao">Ativação: o lançamento "tâb"</a></li>
                    <li><a href="#movimento">Movimento normal das peças</a></li>
                    <li><a href="#caminho">Caminho das peças</a></li>
                    <li><a href="#captura">Captura</a></li>
                    <li><a href="#empilhamento">Empilhamento / deslocamento em grupo</a></li>
                    <li><a href="#separacao">Separação de pilhas</a></li>
                    <li><a href="#turno">Sequência de turno</a></li>
                    <li><a href="#vitoria">Condição de vitória</a></li>
                    <li><a href="#variacoes">Variações regionais</a></li>
                    <li><a href="#fontes">Fontes</a></li>
                </ol>
            </nav>

            <section id="introducao">
                <h3>Introdução</h3>
                <p>
                    Tâb é um jogo de corrida / captura tradicional do norte da África e da Península Arábica,
                    jogado por duas pessoas. As regras variam regionalmente; abaixo segue uma versão
                    abrangente das regras tradicionais tal como descritas nas fontes históricas e modernas.
                </p>
            </section>

            <section id="tabuleiro">
                <h3>Tabuleiro</h3>
                <p>
                    O tabuleiro típico tem 4 linhas (duas linhas exteriores — uma para cada jogador — e duas
                    linhas do meio) e um número ímpar de colunas, frequentemente entre 7 e 15.
                </p>
            </section>

            <section id="pecas">
                <h3>Peças e colocação inicial</h3>
                <ul>
                    <li>Cada jogador tem peças idênticas colocadas em cada casa da sua linha inicial.</li>
                    <li>Numa configuração 4×7, o jogador A ocupa todas as 7 casas da primeira linha; o jogador B ocupa as 7 casas da última linha.</li>
                </ul>
            </section>

            <section id="objetivo">
                <h3>Objetivo</h3>
                <p>O objetivo é capturar todas as peças do adversário, removendo-as do tabuleiro.</p>
            </section>

            <section id="equipamento">
                <h3>Equipamento (varetas)</h3>
                <p>
                    Usa-se um conjunto de 4 varetas de lançamento. Cada vareta tem dois lados distintos:
                    um lado 'plano' (face clara) e um lado 'arqueado' (face escura).
                </p>
            </section>

            <section id="lancamento">
                <h3>Lançamento e valores</h3>
                <ul>
                    <li>0 planas (todas arqueadas): 6 passos + jogue novamente</li>
                    <li>1 plana: 1 passo + jogue novamente</li>
                    <li>2 planas: 2 passos</li>
                    <li>3 planas: 3 passos</li>
                    <li>4 planas: 4 passos + jogue novamente</li>
                </ul>
            </section>

            <section id="ativacao">
                <h3>Ativação</h3>
                <p>
                    Peças na linha inicial só podem mover-se pela primeira vez quando tirar 1 (uma vareta plana).
                    Após ativação, a peça move 1 casa e você pode jogar novamente.
                </p>
            </section>

            <section id="movimento">
                <h3>Movimento das peças</h3>
                <p>
                    As peças movem-se da direita para esquerda nas linhas 2 e 4, e da esquerda para direita nas linhas 1 e 3
                    (da perspectiva do jogador).
                </p>
            </section>

            <section id="caminho">
                <h3>Caminho das peças</h3>
                <p>
                    No final da linha 3, pode escolher entrar na linha 4 (território inimigo) ou continuar nas linhas 2 e 3.
                    Só pode entrar no território inimigo se houver peças inimigas lá.
                    Peças no território inimigo só podem mover se não tiver peças na sua linha inicial.
                </p>
            </section>

            <section id="captura">
                <h3>Captura</h3>
                <p>
                    Pousar numa casa ocupada por uma peça adversária remove a peça adversária do tabuleiro.
                </p>
            </section>

            <section id="vitoria">
                <h3>Condição de vitória</h3>
                <p>
                    O jogo termina quando um jogador captura todas as peças do adversário.
                </p>
            </section>

            <section id="fontes">
                <h3>Fontes</h3>
                <p>
                    Consulte: <a href="https://en.wikipedia.org/wiki/T%C3%A2b" target="_blank" rel="noopener">Wikipedia — Tâb</a>
                </p>
            </section>
        </div>
    </aside>

    <main>
        <div class="message-box" id="msg-box">
            <h3>Relatório de jogo:</h3>
            <div class="message" id="msg">
                <p>Bem-vindo ao Tâb! Clique em "Jogar" para iniciar um novo jogo.</p>
            </div>
        </div>

        <section id="game-board" class="game-board hidden">tabuleiro</section>

        <div id="playBtn" class="play-button" role="button" tabindex="0"
             aria-haspopup="dialog" aria-controls="playDialog"
             aria-expanded="false" title="Play">
            Jogar
        </div>

        <div id="overlay" class="overlay hidden" data-hidden="true">
            <div id="playDialog" class="dialog" role="dialog"
                 aria-modal="true" aria-labelledby="dialogTitle">

                <h2 id="dialogTitle">Novo Jogo</h2>

                <form id="playForm" autocomplete="off">

                    <label for="boardSize">Tamanho do tabuleiro</label>
                    <input
                            id="boardSize"
                            name="boardSize"
                            type="number"
                            min="5"
                            max="15"
                            step="2"
                            value="7"
                            title="Escolha um tamanho ímpar (7, 9, 11...)"
                    />

                    <fieldset>
                        <legend>Adversário</legend>
                        <label>
                            <input type="radio" name="opponent" value="human" checked /> Humano
                        </label>
                        <label>
                            <input type="radio" name="opponent" value="pc" /> Computador
                        </label>
                    </fieldset>

                    <div id="pcOptions" class="pc-options hidden" aria-hidden="true">
                        <label for="difficulty">Dificuldade da IA</label>
                        <select id="difficulty" name="difficulty">
                            <option value="easy">Fácil</option>
                            <option value="medium" selected>Médio</option>
                            <option value="hard">Difícil</option>
                        </select>
                    </div>

                    <label for="starter">Quem começa</label>
                    <select id="starter" name="starter">
                        <option value="player" selected>Vermelho</option>
                        <option value="pc">Azul</option>
                        <option value="random">Aleatório</option>
                    </select>

                    <div class="actions">
                        <button type="button" id="cancelBtn" class="btn btn-secondary">Cancelar</button>
                        <button type="submit" id="confirmBtn" class="btn btn-primary">Confirmar</button>
                    </div>
                </form>
            </div>
        </div>

    </main>

    <aside class="sidebar" id="right-bar">
        <h2>Comandos</h2>
        <div class="dice-area">
            <button id="roll-dice">Jogar Dados</button>
            <div class="dice-result">
                <div class="dice-images">
                    <!-- imagens dos dados aparecem aqui -->
                </div>
                <div class="dice-total">Resultado: —</div>
            </div>
        </div>
        <div class="skip" id="skip-button" role="button" tabindex="0">
            pular a vez
        </div>
        <div class="forfeit" id="forfeit-button" role="button" tabindex="0">
            desistir
        </div>
    </aside>
</div>

<div class="footer">
    <h1>Tâb - Jogo de Tabuleiro Tradicional</h1>
</div>

</body>
</html>
